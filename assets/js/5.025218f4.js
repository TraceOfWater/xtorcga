(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{207:function(t,e,s){},295:function(t,e,s){"use strict";var i=s(207);s.n(i).a},299:function(t,e,s){"use strict";s.r(e);s(228);function i(t){return t>=0?1:-1}function n(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(t-e)<s}function r(t,e,s){return Math.max(e,Math.min(s,t))}var a=s(140),o=s(141);s(150),s(279);var c=function(){function t(e,s,i,n){Object(a.a)(this,t),this._x=e||0,this._y=s||0,this._z=i||0,this._w=void 0!==n?n:1,this.isQuaternion=!0}return Object(o.a)(t,[{key:"slerp",value:function(t,e,s,i){return s.copy(t).slerp(e,i)}},{key:"slerpFlat",value:function(t,e,s,i,n,r,a){var o=s[i+0],c=s[i+1],l=s[i+2],h=s[i+3],u=n[r+0],y=n[r+1],d=n[r+2],m=n[r+3];if(h!==m||o!==u||c!==y||l!==d){var v=1-a,f=o*u+c*y+l*d+h*m,p=f>=0?1:-1,x=1-f*f;if(x>Number.EPSILON){var k=Math.sqrt(x),g=Math.atan2(k,f*p);v=Math.sin(v*g)/k,a=Math.sin(a*g)/k}var _=a*p;if(o=o*v+u*_,c=c*v+y*_,l=l*v+d*_,h=h*v+m*_,v===1-a){var z=1/Math.sqrt(o*o+c*c+l*l+h*h);o*=z,c*=z,l*=z,h*=z}}t[e]=o,t[e+1]=c,t[e+2]=l,t[e+3]=h}},{key:"set",value:function(t,e,s,i){return this._x=t,this._y=e,this._z=s,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,i=t._y,n=t._z,r=t.order,a=Math.cos,o=Math.sin,c=a(s/2),l=a(i/2),h=a(n/2),u=o(s/2),y=o(i/2),d=o(n/2);return"XYZ"===r?(this._x=u*l*h+c*y*d,this._y=c*y*h-u*l*d,this._z=c*l*d+u*y*h,this._w=c*l*h-u*y*d):"YXZ"===r?(this._x=u*l*h+c*y*d,this._y=c*y*h-u*l*d,this._z=c*l*d-u*y*h,this._w=c*l*h+u*y*d):"ZXY"===r?(this._x=u*l*h-c*y*d,this._y=c*y*h+u*l*d,this._z=c*l*d+u*y*h,this._w=c*l*h-u*y*d):"ZYX"===r?(this._x=u*l*h-c*y*d,this._y=c*y*h+u*l*d,this._z=c*l*d-u*y*h,this._w=c*l*h+u*y*d):"YZX"===r?(this._x=u*l*h+c*y*d,this._y=c*y*h+u*l*d,this._z=c*l*d-u*y*h,this._w=c*l*h-u*y*d):"XZY"===r&&(this._x=u*l*h-c*y*d,this._y=c*y*h-u*l*d,this._z=c*l*d+u*y*h,this._w=c*l*h+u*y*d),!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var s=e/2,i=Math.sin(s);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(s),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e,s=t.elements,i=s[0],n=s[4],r=s[8],a=s[1],o=s[5],c=s[9],l=s[2],h=s[6],u=s[10],y=i+o+u;return y>0?(e=.5/Math.sqrt(y+1),this._w=.25/e,this._x=(h-c)*e,this._y=(r-l)*e,this._z=(a-n)*e):i>o&&i>u?(e=2*Math.sqrt(1+i-o-u),this._w=(h-c)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(r+l)/e):o>u?(e=2*Math.sqrt(1+o-i-u),this._w=(r-l)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(c+h)/e):(e=2*Math.sqrt(1+u-i-o),this._w=(a-n)/e,this._x=(r+l)/e,this._y=(c+h)/e,this._z=.25*e),this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var s=t.dot(e)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(r(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var s=this.angleTo(t);if(0===s)return this;var i=Math.min(1,e/s);return this.slerp(t,i),this}},{key:"inverse",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var s=t._x,i=t._y,n=t._z,r=t._w,a=e._x,o=e._y,c=e._z,l=e._w;return this._x=s*l+r*a+i*c-n*o,this._y=i*l+r*o+n*a-s*c,this._z=n*l+r*c+s*o-i*a,this._w=r*l-s*a-i*o-n*c,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var s=this._x,i=this._y,n=this._z,r=this._w,a=r*t._w+s*t._x+i*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=r,this._x=s,this._y=i,this._z=n,this;var o=1-a*a;if(o<=Number.EPSILON){var c=1-e;return this._w=c*r+e*this._w,this._x=c*s+e*this._x,this._y=c*i+e*this._y,this._z=c*n+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(o),h=Math.atan2(l,a),u=Math.sin((1-e)*h)/l,y=Math.sin(e*h)/l;return this._w=r*u+this._w*y,this._x=s*u+this._x*y,this._y=i*u+this._y*y,this._z=n*u+this._z*y,this._onChangeCallback(),this}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}]),t}();function l(t,e,s,i){return new c(t,e,s,i)}var h=function(){function t(e,s,i){Object(a.a)(this,t),this.x=e||0,this.y=s||0,this.z=i||0,this.isVector3=!0}return Object(o.a)(t,[{key:"set",value:function(t,e,s){return this.x=t,this.y=e,this.z=s,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(y.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(y.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,s=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[3]*s+n[6]*i,this.y=n[1]*e+n[4]*s+n[7]*i,this.z=n[2]*e+n[5]*s+n[8]*i,this}},{key:"applyMatrix4",value:function(t){var e=this.x,s=this.y,i=this.z,n=t.elements,r=1/(n[3]*e+n[7]*s+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*s+n[8]*i+n[12])*r,this.y=(n[1]*e+n[5]*s+n[9]*i+n[13])*r,this.z=(n[2]*e+n[6]*s+n[10]*i+n[14])*r,this}},{key:"applyQuaternion",value:function(t){var e=this.x,s=this.y,i=this.z,n=t.x,r=t.y,a=t.z,o=t.w,c=o*e+r*i-a*s,l=o*s+a*e-n*i,h=o*i+n*s-r*e,u=-n*e-r*s-a*i;return this.x=c*o+u*-n+l*-a-h*-r,this.y=l*o+u*-r+h*-n-c*-a,this.z=h*o+u*-a+c*-r-l*-n,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,s=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[4]*s+n[8]*i,this.y=n[1]*e+n[5]*s+n[9]*i,this.z=n[2]*e+n[6]*s+n[10]*i,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,s){return this.subVectors(e,t).multiplyScalar(s).add(t)}},{key:"cross",value:function(t,e){return void 0!==e?(console.warn("Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var s=t.x,i=t.y,n=t.z,r=e.x,a=e.y,o=e.z;return this.x=i*o-n*a,this.y=n*r-s*o,this.z=s*a-i*r,this}},{key:"projectOnVector",value:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)}},{key:"projectOnPlane",value:function(t){return u.copy(this).projectOnVector(t),this.sub(u)}},{key:"reflect",value:function(t){return this.sub(u.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(r(e,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,s=this.y-t.y,i=this.z-t.z;return e*e+s*s+i*i}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,s){var i=Math.sin(e)*t;return this.x=i*Math.sin(s),this.y=Math.cos(e)*t,this.z=i*Math.cos(s),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,s){return this.x=t*Math.sin(e),this.y=s,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=s,this.z=i,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,s){return void 0!==s&&console.warn("Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"toFixed",value:function(t){return void 0!==t&&(this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t))),this}}],[{key:"Up",get:function(){return new t(0,1,0)}},{key:"Down",get:function(){return new t(0,1,0)}},{key:"UnitX",get:function(){return new t(1,0,0)}},{key:"UnitY",get:function(){return new t(0,1,0)}},{key:"UnitZ",get:function(){return new t(0,0,1)}}]),t}(),u=d(),y=l();function d(t,e,s){return new h(t,e,s)}d();var m=function(){function t(){Object(a.a)(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error(" Matrix4: the constructor no longer reads arguments. use .set() instead."),this.isMatrix4=!0}return Object(o.a)(t,[{key:"set",value:function(t,e,s,i,n,r,a,o,c,l,h,u,y,d,m,v){var f=this.elements;return f[0]=t,f[4]=e,f[8]=s,f[12]=i,f[1]=n,f[5]=r,f[9]=a,f[13]=o,f[2]=c,f[6]=l,f[10]=h,f[14]=u,f[3]=y,f[7]=d,f[11]=m,f[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this}},{key:"extractBasis",value:function(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,s=t.elements,i=1/v.setFromMatrixColumn(t,0).length(),n=1/v.setFromMatrixColumn(t,1).length(),r=1/v.setFromMatrixColumn(t,2).length();return e[0]=s[0]*i,e[1]=s[1]*i,e[2]=s[2]*i,e[3]=0,e[4]=s[4]*n,e[5]=s[5]*n,e[6]=s[6]*n,e[7]=0,e[8]=s[8]*r,e[9]=s[9]*r,e[10]=s[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler||console.error(" Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,s=t.x,i=t.y,n=t.z,r=Math.cos(s),a=Math.sin(s),o=Math.cos(i),c=Math.sin(i),l=Math.cos(n),h=Math.sin(n);if("XYZ"===t.order){var u=r*l,y=r*h,d=a*l,m=a*h;e[0]=o*l,e[4]=-o*h,e[8]=c,e[1]=y+d*c,e[5]=u-m*c,e[9]=-a*o,e[2]=m-u*c,e[6]=d+y*c,e[10]=r*o}else if("YXZ"===t.order){var v=o*l,f=o*h,p=c*l,x=c*h;e[0]=v+x*a,e[4]=p*a-f,e[8]=r*c,e[1]=r*h,e[5]=r*l,e[9]=-a,e[2]=f*a-p,e[6]=x+v*a,e[10]=r*o}else if("ZXY"===t.order){v=o*l,f=o*h,p=c*l,x=c*h;e[0]=v-x*a,e[4]=-r*h,e[8]=p+f*a,e[1]=f+p*a,e[5]=r*l,e[9]=x-v*a,e[2]=-r*c,e[6]=a,e[10]=r*o}else if("ZYX"===t.order){u=r*l,y=r*h,d=a*l,m=a*h;e[0]=o*l,e[4]=d*c-y,e[8]=u*c+m,e[1]=o*h,e[5]=m*c+u,e[9]=y*c-d,e[2]=-c,e[6]=a*o,e[10]=r*o}else if("YZX"===t.order){var k=r*o,g=r*c,_=a*o,z=a*c;e[0]=o*l,e[4]=z-k*h,e[8]=_*h+g,e[1]=h,e[5]=r*l,e[9]=-a*l,e[2]=-c*l,e[6]=g*h+_,e[10]=k-z*h}else if("XZY"===t.order){k=r*o,g=r*c,_=a*o,z=a*c;e[0]=o*l,e[4]=-h,e[8]=c*l,e[1]=k*h+z,e[5]=r*l,e[9]=g*h-_,e[2]=_*h-g,e[6]=a*l,e[10]=z*h+k}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(p,t,x)}},{key:"lookAt",value:function(t,e,s){var i=this.elements;return _.subVectors(t,e),0===_.lengthSq()&&(_.z=1),_.normalize(),k.crossVectors(s,_),0===k.lengthSq()&&(1===Math.abs(s.z)?_.x+=1e-4:_.z+=1e-4,_.normalize(),k.crossVectors(s,_)),k.normalize(),g.crossVectors(_,k),i[0]=k.x,i[4]=g.x,i[8]=_.x,i[1]=k.y,i[5]=g.y,i[9]=_.y,i[2]=k.z,i[6]=g.z,i[10]=_.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn(" Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var s=t.elements,i=e.elements,n=this.elements,r=s[0],a=s[4],o=s[8],c=s[12],l=s[1],h=s[5],u=s[9],y=s[13],d=s[2],m=s[6],v=s[10],f=s[14],p=s[3],x=s[7],k=s[11],g=s[15],_=i[0],z=i[4],w=i[8],b=i[12],M=i[1],S=i[5],q=i[9],C=i[13],j=i[2],P=i[6],O=i[10],D=i[14],F=i[3],V=i[7],A=i[11],E=i[15];return n[0]=r*_+a*M+o*j+c*F,n[4]=r*z+a*S+o*P+c*V,n[8]=r*w+a*q+o*O+c*A,n[12]=r*b+a*C+o*D+c*E,n[1]=l*_+h*M+u*j+y*F,n[5]=l*z+h*S+u*P+y*V,n[9]=l*w+h*q+u*O+y*A,n[13]=l*b+h*C+u*D+y*E,n[2]=d*_+m*M+v*j+f*F,n[6]=d*z+m*S+v*P+f*V,n[10]=d*w+m*q+v*O+f*A,n[14]=d*b+m*C+v*D+f*E,n[3]=p*_+x*M+k*j+g*F,n[7]=p*z+x*S+k*P+g*V,n[11]=p*w+x*q+k*O+g*A,n[15]=p*b+x*C+k*D+g*E,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"applyToBufferAttribute",value:function(t){for(var e=0,s=t.count;e<s;e++)v.x=t.getX(e),v.y=t.getY(e),v.z=t.getZ(e),v.applyMatrix4(this),t.setXYZ(e,v.x,v.y,v.z);return t}},{key:"determinant",value:function(){var t=this.elements,e=t[0],s=t[4],i=t[8],n=t[12],r=t[1],a=t[5],o=t[9],c=t[13],l=t[2],h=t[6],u=t[10],y=t[14];return t[3]*(+n*o*h-i*c*h-n*a*u+s*c*u+i*a*y-s*o*y)+t[7]*(+e*o*y-e*c*u+n*r*u-i*r*y+i*c*l-n*o*l)+t[11]*(+e*c*h-e*a*y-n*r*h+s*r*y+n*a*l-s*c*l)+t[15]*(-i*a*l-e*o*h+e*a*u+i*r*h-s*r*u+s*o*l)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,s){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=s),this}},{key:"getInverse",value:function(t,e){var s=this.elements,i=t.elements,n=i[0],r=i[1],a=i[2],o=i[3],c=i[4],l=i[5],h=i[6],u=i[7],y=i[8],d=i[9],m=i[10],v=i[11],f=i[12],p=i[13],x=i[14],k=i[15],g=d*x*u-p*m*u+p*h*v-l*x*v-d*h*k+l*m*k,_=f*m*u-y*x*u-f*h*v+c*x*v+y*h*k-c*m*k,z=y*p*u-f*d*u+f*l*v-c*p*v-y*l*k+c*d*k,w=f*d*h-y*p*h-f*l*m+c*p*m+y*l*x-c*d*x,b=n*g+r*_+a*z+o*w;if(0===b){var M=" Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var S=1/b;return s[0]=g*S,s[1]=(p*m*o-d*x*o-p*a*v+r*x*v+d*a*k-r*m*k)*S,s[2]=(l*x*o-p*h*o+p*a*u-r*x*u-l*a*k+r*h*k)*S,s[3]=(d*h*o-l*m*o-d*a*u+r*m*u+l*a*v-r*h*v)*S,s[4]=_*S,s[5]=(y*x*o-f*m*o+f*a*v-n*x*v-y*a*k+n*m*k)*S,s[6]=(f*h*o-c*x*o-f*a*u+n*x*u+c*a*k-n*h*k)*S,s[7]=(c*m*o-y*h*o+y*a*u-n*m*u-c*a*v+n*h*v)*S,s[8]=z*S,s[9]=(f*d*o-y*p*o-f*r*v+n*p*v+y*r*k-n*d*k)*S,s[10]=(c*p*o-f*l*o+f*r*u-n*p*u-c*r*k+n*l*k)*S,s[11]=(y*l*o-c*d*o-y*r*u+n*d*u+c*r*v-n*l*v)*S,s[12]=w*S,s[13]=(y*p*a-f*d*a+f*r*m-n*p*m-y*r*x+n*d*x)*S,s[14]=(f*l*a-c*p*a-f*r*h+n*p*h+c*r*x-n*l*x)*S,s[15]=(c*d*a-y*l*a+y*r*h-n*d*h-c*r*m+n*l*m)*S,this}},{key:"scale",value:function(t){var e=this.elements,s=t.x,i=t.y,n=t.z;return e[0]*=s,e[4]*=i,e[8]*=n,e[1]*=s,e[5]*=i,e[9]*=n,e[2]*=s,e[6]*=i,e[10]*=n,e[3]*=s,e[7]*=i,e[11]*=n,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,i))}},{key:"makeTranslation",value:function(t,e,s){return this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var s=Math.cos(e),i=Math.sin(e),n=1-s,r=t.x,a=t.y,o=t.z,c=n*r,l=n*a;return this.set(c*r+s,c*a-i*o,c*o+i*a,0,c*a+i*o,l*a+s,l*o-i*r,0,c*o-i*a,l*o+i*r,n*o*o+s,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,s){return this.set(1,e,s,0,t,1,s,0,t,e,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,s){var i=this.elements,n=e._x,r=e._y,a=e._z,o=e._w,c=n+n,l=r+r,h=a+a,u=n*c,y=n*l,d=n*h,m=r*l,v=r*h,f=a*h,p=o*c,x=o*l,k=o*h,g=s.x,_=s.y,z=s.z;return i[0]=(1-(m+f))*g,i[1]=(y+k)*g,i[2]=(d-x)*g,i[3]=0,i[4]=(y-k)*_,i[5]=(1-(u+f))*_,i[6]=(v+p)*_,i[7]=0,i[8]=(d+x)*z,i[9]=(v-p)*z,i[10]=(1-(u+m))*z,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}},{key:"decompose",value:function(t,e,s){var i=this.elements,n=v.set(i[0],i[1],i[2]).length(),r=v.set(i[4],i[5],i[6]).length(),a=v.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),t.x=i[12],t.y=i[13],t.z=i[14],f.copy(this);var o=1/n,c=1/r,l=1/a;return f.elements[0]*=o,f.elements[1]*=o,f.elements[2]*=o,f.elements[4]*=c,f.elements[5]*=c,f.elements[6]*=c,f.elements[8]*=l,f.elements[9]*=l,f.elements[10]*=l,e.setFromRotationMatrix(f),s.x=n,s.y=r,s.z=a,this}},{key:"makePerspective",value:function(t,e,s,i,n,r){void 0===r&&console.warn(" Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*n/(e-t),c=2*n/(s-i),l=(e+t)/(e-t),h=(s+i)/(s-i),u=-(r+n)/(r-n),y=-2*r*n/(r-n);return a[0]=o,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=y,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}},{key:"makeOrthographic",value:function(t,e,s,i,n,r){var a=this.elements,o=1/(e-t),c=1/(s-i),l=1/(r-n),h=(e+t)*o,u=(s+i)*c,y=(r+n)*l;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-y,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,s=t.elements,i=0;i<16;i++)if(e[i]!==s[i])return!1;return!0}},{key:"fromArray",value:function(t,e){void 0===e&&(e=0);for(var s=0;s<16;s++)this.elements[s]=t[s+e];return this}},{key:"toArray",value:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}],[{key:"Identity",get:function(){return new t}}]),t}(),v=d(),f=z(),p=d(0,0,0),x=d(1,1,1),k=d(),g=d(),_=d();function z(){return new m}z(),l();s(221);var w=s(158),b=s(154),M=s(157),S=s(169),q=function(t){function e(t,s){var i;return Object(a.a)(this,e),(i=Object(w.a)(this,Object(b.a)(e).call(this))).push(t||d(),s||d()),i.center=i.p0.clone().add(i.p1).multiplyScalar(.5),i.lenDirection=i.p1.clone().sub(i.p0),i.lenSq=i.lenDirection.lengthSq(),i.len=Math.sqrt(i.lenSq),i.direction=i.lenDirection.clone().normalize(),i}return Object(M.a)(e,t),Object(o.a)(e,[{key:"at",value:function(t,e){return void 0===e&&(e=new Vector3),e.subVectors(this.end,this.start).multiplyScalar(t).add(this.start)}},{key:"equals",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p1.equals(t.p0)&&this.p1.equals(t.p0)}},{key:"clone",value:function(){return new e(this.p0.clone(),this.p1.clone())}},{key:"containPoint",value:function(t){return t.inside(this)}},{key:"distancePoint",value:function(t){return t.distanceSegment(this)}},{key:"distanceSegment",value:function(t){var e={parameters:[],closests:[]};function s(t,e,s){var i;return e<0?s>0?(i=-e/t)>1&&(i=.5):i=1:i=0,i}var i=this.p1.clone().sub(this.p0),n=t.p1.clone().sub(t.p0),r=this.p0.clone().sub(t.p0),a=i.dot(i),o=i.dot(n),c=n.dot(n),l=i.dot(r),h=n.dot(r),u=l,y=u+a,d=u-o,m=y-o,v=-h,f=v-o,p=v+c,x=f+c;if(a>0&&c>0){var k=[];k[0]=s(a,u,y),k[1]=s(a,d,m);for(var g=[],_=0;_<2;++_)k[_]<=0?g[_]=-1:k[_]>=1?g[_]=1:g[_]=0;if(-1==g[0]&&-1==g[1])e.parameters[0]=0,e.parameters[1]=s(c,v,p);else if(1==g[0]&&1==g[1])e.parameters[0]=1,e.parameters[1]=s(c,f,x);else{for(var z=[],w=new Array(2),b=0;b<w.length;b++)w[b]=new Array(2);!function(t,e,s,i){e[0]<0?(s[0]=0,i[0][0]=0,i[0][1]=u/o,(i[0][1]<0||i[0][1]>1)&&(i[0][1]=.5),0==e[1]?(s[1]=3,i[1][0]=t[1],i[1][1]=1):(s[1]=1,i[1][0]=1,i[1][1]=y/o,(i[1][1]<0||i[1][1]>1)&&(i[1][1]=.5))):0==e[0]?(s[0]=2,i[0][0]=t[0],i[0][1]=0,e[1]<0?(s[1]=0,i[1][0]=0,i[1][1]=u/o,(i[1][1]<0||i[1][1]>1)&&(i[1][1]=.5)):0==e[1]?(s[1]=3,i[1][0]=t[1],i[1][1]=1):(s[1]=1,i[1][0]=1,i[1][1]=y/o,(i[1][1]<0||i[1][1]>1)&&(i[1][1]=.5))):(s[0]=1,i[0][0]=1,i[0][1]=y/o,(i[0][1]<0||i[0][1]>1)&&(i[0][1]=.5),0==e[1]?(s[1]=3,i[1][0]=t[1],i[1][1]=1):(s[1]=0,i[1][0]=0,i[1][1]=u/o,(i[1][1]<0||i[1][1]>1)&&(i[1][1]=.5)))}(k,g,z,w),function(t,e,i){var n=e[1][1]-e[0][1],r=n*(-o*e[0][0]+c*e[0][1]-h);if(r>=0)0==t[0]?(i[0]=0,i[1]=s(c,v,p)):1==t[0]?(i[0]=1,i[1]=s(c,f,x)):(i[0]=e[0][0],i[1]=e[0][1]);else{var a=n*(-o*e[1][0]+c*e[1][1]-h);if(a<=0)0==t[1]?(i[0]=0,i[1]=s(c,v,p)):1==t[1]?(i[0]=1,i[1]=s(c,f,x)):(i[0]=e[1][0],i[1]=e[1][1]);else{var l=Math.min(Math.max(r/(r-a),0),1),u=1-l;i[0]=u*e[0][0]+l*e[1][0],i[1]=u*e[0][1]+l*e[1][1]}}}(z,w,e.parameters)}}else a>0?(e.parameters[0]=s(a,u,y),e.parameters[1]=0):c>0?(e.parameters[0]=0,e.parameters[1]=s(c,v,p)):(e.parameters[0]=0,e.parameters[1]=0);e.closests[0]=this.p0.clone().multiplyScalar(1-e.parameters[0]).add(this.p1.clone().multiplyScalar(e.parameters[0])),e.closests[1]=t.p0.clone().multiplyScalar(1-e.parameters[1]).add(t.p1.clone().multiplyScalar(e.parameters[1]));var M=e.closests[0].clone().sub(e.closests[1]);return e.sqrDistance=M.dot(M),e.distance=Math.sqrt(e.sqrDistance),e}},{key:"distanceRay",value:function(t){}},{key:"distanceLine",value:function(t){}},{key:"intersectSegment",value:function(t){var s=this.distanceSegment(t),i=this.distanceLine(t);if(s.interserct=!1,n(this.normal.dot(t.normal),1,1e-4)){if(s.distance>1e-4)return s;s.interserct=!0,s.parameters.every((function(t){return 0===t||1===t}))||(0===s.parameters[0]||1===s.parameters[0]?s.splitSegs=[[this],[new e(t.p0,s.closests[1]),new e(s.closests[1],t.p1)]]:0===s.parameters[1]||1===s.parameters[1]?s.splitSegs=[[new e(this.p0,s.closests[0]),new e(s.closests[0],this.p1)],t]:s.splitSegs=[[new e(this.p0,s.closests[0]),new e(s.closests[0],this.p1)],[new e(t.p0,s.closests[1]),new e(s.closests[1],t.p1)]])}else i.distance>=1e-4||(this.equals(t)?s.equals=!0:s.parameters.every((function(t){return 0===t||1===t})));return s}},{key:"offset",value:function(t,e,s){t=t||new Vector3(0,1,0);var i=(e=p1.clone().sub(p0).normalize()).clone().cross(t).normalize(),n={};return n.arr=[i.clone().multiplyScalar(s).add(p0),i.clone().multiplyScalar(s).add(p1)],n.direction=e,n.tandir=i,n}},{key:"p0",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"p1",get:function(){return this[1]},set:function(t){this[1]=t}}]),e}(Object(S.a)(Array));var C=function(){function t(e,s){Object(a.a)(this,t),this.origin=void 0!==e?e:d(),this.end=void 0!==s?s:d(),this.direction=this.end.clone().sub(this.origin).normalize()}return Object(o.a)(t,[{key:"distancePoint",value:function(t){return t.distanceLine(this)}},{key:"distanceLine",value:function(t){var e,s,i={parameters:[],closests:[]},n=this.origin.clone().sub(t.origin),r=-this.direction.dot(t.direction),a=n.dot(this.direction);if(Math.abs(r)<1){var o=1-r*r,c=-n.dot(t.direction);e=(r*c-a)/o,s=(r*a-c)/o}else e=-a,s=0;return i.parameters[0]=e,i.parameters[1]=s,i.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),i.closests[1]=t.direction.clone().multiplyScalar(s).add(t.origin),n=i.closests[0].clone().sub(i.closests[1]),i.sqrDistance=n.dot(n),i.distance=Math.sqrt(i.sqrDistance),i}},{key:"distanceRay",value:function(t){var e,s,i={parameters:[],closests:[],sqrDistance:0,distance:0},n=this.origin.clone().sub(t.origin),r=-this.direction.dot(t.direction),a=n.dot(this.direction);if(Math.abs(r)<1){var o=-n.dot(t.direction);if((s=r*a-o)>=0){var c=1-r*r;e=(r*o-a)/c,s/=c}else e=-a,s=0}else e=-a,s=0;return i.parameters[0]=e,i.parameters[1]=s,i.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),i.closests[1]=t.direction.clone().multiplyScalar(s).add(t.origin),n=i.closests[0].clone().sub(i.closests[1]),i.sqrDistance=n.dot(n),i.distance=Math.sqrt(i.sqrDistance),i}},{key:"distanceSegment",value:function(t){var e,s,i={parameters:[],closests:[]},n=t.center,r=t.direction,a=.5*t.len,o=this.origin.clone().sub(n),c=-this.direction.dot(r),l=o.dot(this.direction);if(Math.abs(c)<1){var h=1-c*c,u=a*h,y=-o.dot(r);(s=c*l-y)>=-u?s<=u?(e=(c*y-l)/h,s/=h):e=-(c*(s=a)+l):e=-(c*(s=-a)+l)}else s=0,e=-l;return i.parameters[0]=e,i.parameters[1]=s,i.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),i.closests[1]=r.clone().multiplyScalar(s).add(n),o=i.closests[0].clone().sub(i.closests[1]),i.sqrDistance=o.dot(o),i.distance=Math.sqrt(i.sqrDistance),i}},{key:"distancePlane",value:function(t){}},{key:"distanceTriangle",value:function(t){function e(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&1<=t&&t<=3){var s=e[0].length();e[0].normalize();for(var i=1;i<t;++i){for(var n=0;n<i;++n){var r=e[i].dot(e[n]);e[i].sub(e[n].clone().multiplyScalar(r))}var a=e[i].length();e[i].normalize(),a<s&&(s=a)}return s}return 0}var s={closests:[],parameters:[],triangleParameter:[]},i=t.p1.clone().sub(t.p0),n=t.p2.clone().sub(t.p0),r=i.clone().cross(n).normalize().dot(this.direction);if(Math.abs(r)>=1e-4){var a=this.origin.clone().sub(t.p0),o=new Array(3);o[0]=this.direction,function(t,s){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];1===t&&(Math.abs(s[0][0])>Math.abs(s[0][1])?s[1]=d(-s[0].z,0,+s[0].x):s[1]=d(0,+s[0].z,-s[0].y),t=2),2==t&&(s[2]=s[0].clone().cross(s[1]),e(3,s,i))}(1,o);var c=o[1].dot(i),l=o[1].dot(n),h=o[1].dot(a),u=o[2].dot(i),y=o[2].dot(n),m=o[2].dot(a),v=1/(c*y-l*u),f=(y*h-l*m)*v,p=(c*m-u*h)*v,x=1-f-p;if(x>=0&&f>=0&&p>=0){var k=this.direction.dot(i),g=this.direction.dot(n),_=this.direction.dot(a);return s.lineParameter=f*k+p*g-_,s.triangleParameter[0]=x,s.triangleParameter[1]=f,s.triangleParameter[2]=p,s.closests[0]=this.direction.clone().multiplyScalar(s.lineParameter).add(this.origin),s.closests[1]=i.multiplyScalar(f).add(n.multiplyScalar(p)).add(t.p0),s.distance=0,s.sqrDistance=0,s}}s.distance=1/0,s.sqrDistance=1/0;for(var z=2,w=0;w<3;z=w++){t[z].clone().add(t[w]).multiplyScalar(.5);var b=t[w].clone().sub(t[z]),M=.5*b.length();b.normalize();var S=new q(t[z],t[w]),C=this.distanceSegment(S);C.sqrDistance<s.sqrDistance&&(s.sqrDistance=C.sqrDistance,s.distance=C.distance,s.lineParameter=C.parameters[0],s.triangleParameter[z]=.5*(1-C.parameters[0]/M),s.triangleParameter[w]=1-s.triangleParameter[z],s.triangleParameter[3-z-w]=0,s.closests[0]=C.closests[0],s.closests[1]=C.closests[1])}return s}},{key:"intersectLine",value:function(t){}},{key:"parallelLine",value:function(t){}}]),t}();s(280),Object(S.a)(Array);var j=function(t){function e(t,s,i){return Object(a.a)(this,e),Object(w.a)(this,Object(b.a)(e).call(this,t,s,i))}return Object(M.a)(e,t),Object(o.a)(e,[{key:"distancePoint",value:function(t){var e={closests:[this,t]};return e.distanceSqr=this.clone().sub(t).lengthSq(),e.distance=Math.sqrt(e.distanceSqr),e}},{key:"distanceLine",value:function(t){var e={parameters:[],closests:[]},s=this.clone().sub(t.origin),i=t.direction.dot(s),n=t.direction.clone().multiplyScalar(i).add(t.origin);return e.parameters.push(0,i),e.closests.push(this,n),s=e.closests[0].clone().sub(e.closests[1]),e.distanceSqr=s.dot(s),e.distance=Math.sqrt(e.distanceSqr),e}},{key:"distanceRay",value:function(t){var e={parameters:[],closests:[]},s=this.clone().sub(t.origin);return e.rayParameter=t.direction.dot(s),e.rayParameter>0?e.rayClosest=t.direction.clone().multiplyScalar(e.rayParameter).add(t.origin):e.rayClosest=t.origin.clone(),e.parameters.push(0,e.rayParameter),e.closests.push(this,e.rayClosest),s=this.clone().sub(e.rayClosest),e.distanceSqr=s.dot(s),e.distance=Math.sqrt(e.distanceSqr),e}},{key:"distanceSegment",value:function(t){var e={parameters:[],closests:[]},s=this.clone().sub(t.p1),i=t.lenDirection.dot(s);if(i>=0)e.segmentParameter=1,e.segmentClosest=t.p1;else if(s=this.clone().sub(t.p0),(i=t.lenDirection.dot(s))<=0)e.segmentParameter=0,e.segmentClosest=t.p0;else{var n=t.lenSq;n<=0&&(n=0),i/=n,e.segmentParameter=i,e.segmentClosest=t.lenDirection.clone().multiplyScalar(i).add(t.p0)}return e.parameters.push(0,e.segmentParameter),e.closests.push(this,e.segmentClosest),s=this.clone().sub(e.segmentClosest),e.distanceSqr=s.dot(s),e.distance=Math.sqrt(e.distanceSqr),e}},{key:"distancePolyline",value:function(t){for(var e=1/0,s=-1,i=null,n=null,r=0;r<t.length-1;r++){var a=t[r],o=t[r+1];Math.abs(a.x-this.x)>e&&Math.abs(o.x-this.x)>e&&(a.x-this.x)*(o.x-this.x)>0||(Math.abs(a.y-this.y)>e&&Math.abs(o.y-this.y)>e&&(a.y-this.y)*(o.y-this.y)>0||Math.abs(a.z-this.z)>e&&Math.abs(o.z-this.z)>e&&(a.z-this.z)*(o.z-this.z)>0||(i=this.distanceSegment(new q(a,o))).distance<e&&(e=i.distance,n=i,s=r))}return n.segmentIndex=s,n}},{key:"distancePolyline1",value:function(t){for(var e=1/0,s=-1,i=null,n=null,r=0;r<t.length-1;r++){var a=t[r],o=t[r+1];e>(i=this.distanceSegment(new q(a,o))).distance&&(e=i.distance,n=i,s=r)}return n.segmentIndex=s,n}},{key:"distancePlane",value:function(t){var e={parameters:[],closests:[],signedDistance:0,distance:0,planeClosestPoint:null};return e.signedDistance=this.clone().dot(t.normal)-t.w,e.distance=Math.abs(e.signedDistance),e.planeClosestPoint=this.clone().sub(t.normal.clone().multiplyScalar(e.signedDistance)),e.closests.push(this,e.planeClosestPoint),e}},{key:"distanceCircle",value:function(t){var e={parameters:[],closests:[],equidistant:!1},s=this.clone().sub(t.center),i=s.clone().sub(t.normal.clone().multiplyScalar(t.normal.dot(s))),n=i.length();if(n>1e-4)e.circleClosest=i.clone().multiplyScalar(t.radius/n).add(t.center),e.equidistant=!1;else{var r=t.center.clone().add(10,10,10).sub(t.center),a=r.clone().sub(t.normal.clone().multiplyScalar(t.normal.dot(r))).normalize();e.circleClosest=a.clone().multiplyScalar(t.radius).add(t.center),e.equidistant=!0}e.closests.push(this,e.circleClosest);var o=this.clone().sub(e.circleClosest);return e.sqrDistance=o.dot(o),e.distance=Math.sqrt(e.sqrDistance),e}},{key:"distanceDisk",value:function(t){var e={parameters:[],closests:[],signed:1,sqrDistance:0,distance:0,diskClosest:null},s=this.clone().sub(t.center),n=s.clone().sub(t.normal.clone().multiplyScalar(t.normal.dot(s))),r=n.length();if(e.signed=i(this.clone().dot(t.normal)-t.w),r>t.radius)e.diskClosest=n.clone().multiplyScalar(t.radius/r).add(t.center);else{var a=this.clone().dot(t.normal)-t.w;e.diskClosest=this.clone().sub(t.normal.clone().multiplyScalar(a))}e.closests.push(this,e.diskClosest);var o=this.clone().sub(e.diskClosest);return e.sqrDistance=o.dot(o),e.distance=Math.sqrt(e.sqrDistance),e}},{key:"distanceCapsule",value:function(t){var e=this.distanceSegment(t);return e.distance=e.distance-t.radius,e.closest=this.clone().sub(e.segmentClosest).normalize().multiplyScalar(t.radius),e.interior=e.distance<0,e.closests=[this,e.closest],e}},{key:"distanceTriangle",value:function(t){function e(t,e,s){s[0]=0,s[1]=e>=0?0:t+e<=0?1:-e/t}function s(t,e,s,i,n,r){var a=t+s-i;if(a>=0)r[1]=0;else{var o=e+s-n;r[1]=o<=0?1:a/(a-o)}r[0]=1-r[1]}function i(t,e,s,i,n){var r=e/(e-i);n[0]=(1-r)*t[0]+r*s[0],n[1]=(1-r)*t[1]+r*s[1]}var n,r,a,o=this.clone().sub(t.p0),c=t.p1.clone().sub(t.p0),l=t.p2.clone().sub(t.p0),h=c.dot(c),u=c.dot(l),y=l.dot(l),d=-o.dot(c),m=-o.dot(l),v=d,f=d+h,p=d+u,x=[0,0],k=[0,0],g=[0,0];v>=0?p>=0?e(y,m,g):(x[0]=0,x[1]=v/(v-p),k[0]=p/(p-f),k[1]=1-k[0],(r=(n=k[1]-x[1])*(y*x[1]+m))>=0?e(y,m,g):(a=n*(u*k[0]+y*k[1]+m))<=0?s(u,y,m,f,p,g):i(x,r,k,a,g)):p<=0?f<=0?s(u,y,m,f,p,g):(x[0]=v/(v-f),x[1]=0,k[0]=p/(p-f),k[1]=1-k[0],(r=k[1]*(u*x[0]+m))>=0?g=x:(a=k[1]*(u*k[0]+y*k[1]+m))<=0?s(u,y,m,f,p,g):i(x,r,k,a,g)):f<=0?(x[0]=0,x[1]=v/(v-p),k[0]=p/(p-f),k[1]=1-k[0],(r=(n=k[1]-x[1])*(y*x[1]+m))>=0?e(y,m,g):(a=n*(u*k[0]+y*k[1]+m))<=0?s(u,y,m,f,p,g):i(x,r,k,a,g)):(x[0]=v/(v-f),x[1]=0,k[0]=0,k[1]=v/(v-p),(r=k[1]*(u*x[0]+m))>=0?g=x:(a=k[1]*(y*k[1]+m))<=0?e(y,m,g):i(x,r,k,a,g));var _={parameter:[],parameters:[],closests:[]};return _.parameter[0]=1-g[0]-g[1],_.parameter[1]=g[0],_.parameter[2]=g[1],_.closest=t.p0.clone().add(c.multiplyScalar(g[0])).add(l.multiplyScalar(g[1])),_.parameters.push(0,_.rayParameter),_.closests.push(this,_.closest),o=this.clone().sub(_.closest),_.sqrDistance=o.dot(o),_.distance=Math.sqrt(_.sqrDistance),_}},{key:"distanceRectangle",value:function(t){var e={rectangleParameter:[],parameters:[],closests:[]};diff=t.center-point;var s=diff.dot(t.axis[0]),i=diff.dot(t.axis[1]),n=-s,r=-i;e.sqrDistance=diff.dot(diff),n<-t.extent[0]?n=-t.extent[0]:n>t.extent[0]&&(n=t.extent[0]),e.sqrDistance+=n*(n+2*s),r<-t.extent[1]?r=-t.extent[1]:r>t.extent[1]&&(r=t.extent[1]),e.sqrDistance+=r*(r+2*i),e.sqrDistance<0&&(e.sqrDistance=0),e.distance=Math.sqrt(e.sqrDistance),e.rectangleParameter[0]=n,e.rectangleParameter[1]=r,e.rectangleClosestPoint=t.center;for(var a=0;a<2;++a)e.rectangleClosestPoint.add(t.axis[a].clone().multiplyScalar(e.rectangleParameter[a]));return e.closests.push(this,e.rectangleClosestPoint),e}},{key:"distancePolygon",value:function(t){}},{key:"distanceSphere",value:function(t){var e={parameters:[],closests:[]};return e.distance=this.distanceTo(t.center)-t.radius,e.closest=this.point.clone().sub(t.center).normalize().multiplyScalar(t.radius),e.closests.push(this,e.closest),e}},{key:"insideLine",value:function(){}},{key:"insideRay",value:function(){}},{key:"insideSegment",value:function(){}},{key:"insidePlane",value:function(){}},{key:"orientationLine",value:function(){}},{key:"orientationPlane",value:function(){}},{key:"orientationCircle",value:function(){}}]),e}(h);var P=function(){function t(e,s,i){Object(a.a)(this,t),this.center=e||new h,this.normal=s.normalize(),this.radius=i||0}return Object(o.a)(t,[{key:"area",value:function(){return Math.PI*this.radius*this.radius}}]),t}();var O=function(){function t(e,s,i){Object(a.a)(this,t),this.center=e||d(),this.normal=s,this.radius=i||0,this.w=this.normal.dot(e)}return Object(o.a)(t,[{key:"area",value:function(){return Math.PI*this.radius*this.radius}}]),t}();var D=s(209),F=function(t){function e(t){var s,i;return Object(a.a)(this,e),(s=i=Object(w.a)(this,Object(b.a)(e).call(this))).push.apply(s,Object(D.a)(t)),i}return Object(M.a)(e,t),Object(o.a)(e,[{key:"offset",value:function(t){return new e(this)}}]),e}(Object(S.a)(Array)),V=function(t){function e(){return Object(a.a)(this,e),Object(w.a)(this,Object(b.a)(e).call(this))}return Object(M.a)(e,t),Object(o.a)(e,[{key:"offset",value:function(){}}]),e}(F),A=function(){function t(e,s){Object(a.a)(this,t),this.origin=e,this.direction=s.normalize()}return Object(o.a)(t,[{key:"distanceRay",value:function(t){var e,s,i,n={parameters:[],closests:[],sqrDistance:0,distance:0},r=this.origin.clone().sub(t.origin),a=-this.direction.dot(t.direction),o=r.dot(this.direction);if(Math.abs(a)<1)if(i=a*o-(e=-r.dot(t.direction)),(s=a*e-o)>=0)if(i>=0){var c=1-a*a;s/=c,i/=c}else i=0,s=o>=0?0:-o;else i>=0?(s=0,i=e>=0?0:-e):o<0?(s=-o,i=0):(s=0,i=e>=0?0:-e);else a>0?(i=0,s=o>=0?0:-o):o>=0?(s=0,i=-(e=-r.dot(t.direction))):(s=-o,i=0);return n.parameters[0]=s,n.parameters[1]=i,n.closests[0]=this.direction.clone().multiplyScalar(s).add(this.origin),n.closests[1]=t.direction.clone().multiplyScalar(i).add(t.origin),r=n.closests[0].clone().sub(n.closests[1]),n.sqrDistance=r.dot(r),n.distance=Math.sqrt(n.sqrDistance),n}},{key:"distanceSegment",value:function(t){var e,s,i={parameters:[],closests:[],sqrDistance:0,distance:0},n=t.center,r=t.direction,a=.5*t.len,o=this.origin.clone().sub(n),c=-this.direction.dot(r),l=o.dot(this.direction);if(Math.abs(c)<1){var h=1-c*c,u=a*h,y=-o.dot(r);s=c*l-y,(e=c*y-l)>=0?s>=-u?s<=u?(e/=h,s/=h):(s=a,e=Math.max(-(c*s+l),0)):(s=-a,e=Math.max(-(c*s+l),0)):s<=-u?(e=-(-c*a+l))>0?s=-a:(e=0,(s=-y)<-a?s=-a:s>a&&(s=a)):s<=u?(e=0,(s=-y)<-a?s=-a:s>a&&(s=a)):(e=-(c*a+l))>0?s=a:(e=0,(s=-y)<-a?s=-a:s>a&&(s=a))}else s=c>0?-a:a,e=Math.max(-(c*s+l),0);return i.parameters[0]=e,i.parameters[1]=s,i.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),i.closests[1]=r.clone().multiplyScalar(s).add(n),o=i.closests[0].clone().sub(i.closests[1]),i.sqrDistance=o.dot(o),i.distance=Math.sqrt(i.sqrDistance),i}},{key:"distanceTriangle",value:function(t){var e={parameters:[],closests:[],triangleParameter:[],sqrDistance:0,distance:0},s=new C(this.origin,this.origin.clone().add(this.direction)).distanceTriangle(t);if(s.lineParameter>=0)e.distance=s.distance,e.sqrDistance=s.sqrDistance,e.rayParameter=s.lineParameter,e.triangleParameter[0]=s.triangleParameter[0],e.triangleParameter[1]=s.triangleParameter[1],e.triangleParameter[2]=s.triangleParameter[2],e.closests[0]=s.closests[0],e.closests[1]=s.closests[1];else{var i=(new j).copy(this.origin).distanceTriangle(t);e.distance=i.distance,e.sqrDistance=i.sqrDistance,e.rayParameter=0,e.triangleParameter[0]=i.parameter[0],e.triangleParameter[1]=i.parameter[1],e.triangleParameter[2]=i.parameter[2],e.closests[0]=this.origin,e.closests[1]=i.closest}return e}},{key:"distanceLine",value:function(t){}}]),t}();var E=function(t){function e(t,s,i){var n;return Object(a.a)(this,e),(n=Object(w.a)(this,Object(b.a)(e).call(this))).push(t,s,i),n}return Object(M.a)(e,t),Object(o.a)(e,[{key:"distancePoint",value:function(t){}},{key:"distanceLine",value:function(t){}},{key:"distanceRay",value:function(t){}},{key:"distanceSegment",value:function(t){}},{key:"p0",get:function(){return this[0]}},{key:"p1",get:function(){return this[1]}},{key:"p2",get:function(){return this[2]}}]),e}(Object(S.a)(Array)),T=(s(281),s(282),s(283),s(220),s(182),s(222),s(185),s(170),s(287),s(288),s(194),s(290),s(292),s(293)),R=s(206);function L(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function Z(t){switch(t){case"Point":return(new j).copy(Y());case"Line":return new C(Y(),Y());case"Ray":return new A(Y(),Y().normalize());case"Segment":return new q(Y(),Y());case"Polyline":for(var e=[],s=0;s<Math.floor(100*Math.random()+3);s++)e.push(Y());return new F(e);case"Triangle":return new E(Y(200),Y(200),Y(200));case"Circle":return new P(Y(),Y().normalize(),60*Math.random()+5);case"Disk":return new O(Y(),Y().normalize(),60*Math.random()+5);case"Capsule":return new(void 0)(Y(),Y())}}function X(t,e,s){var i=Z(t),n=Z(e),r=i["distance"+e](n);return s.add(I(i)),s.add(I(n)),r.closests&&2===r.closests.length&&s.add(function(t,e){var s,i=new R.i;(s=i.vertices).push.apply(s,Object(D.a)(t));var n=new R.l(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?L(Object(s),!0).forEach((function(e){Object(T.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):L(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({color:16711680,dashSize:1,gapSize:1,scale:1},e)),r=new R.j(i,n);return r.computeLineDistances(),r}(r.closests)),r}function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return d(Math.random()*t-t/2,Math.random()*t,Math.random()*t-t/3)}function Q(t,e){var s=t.clone().normalize(),i=e.clone().normalize(),n=s.clone().cross(i).normalize(),a=new R.w,o=r(s.normalize().dot(i.normalize()),-1,1);return o=Math.acos(o),a.setFromAxisAngle(n,o),a}function I(t,e){var s=null;if(t instanceof j||t.isVector3){(n=new R.c).setAttribute("position",new R.h([t.x,t.y,t.z],3));var i=new R.u({size:5,sizeAttenuation:!1,color:1044720,alphaTest:.9,transparent:!0});s=new R.t(n,i)}else if(t instanceof C){var n=new R.i,r=t.direction.clone().multiplyScalar(1e4).add(t.origin),a=t.direction.clone().multiplyScalar(-1e4).add(t.origin);n.vertices.push(r,a);i=new R.k({color:16777103});s=new R.j(n,i)}else if(t instanceof A){n=new R.i,r=t.direction.clone().multiplyScalar(1e4).add(t.origin);n.vertices.push(t.origin,r);i=new R.k({color:16748543});s=new R.j(n,i)}else if(t instanceof q){(n=new R.i).vertices.push(t.p0,t.p1);i=new R.k({color:9437183});s=new R.j(n,i)}else if(t instanceof E){(n=new R.i).vertices=Object(D.a)(t),n.faces.push(new R.g(0,1,2));i=new R.p({color:9408511,side:R.e});s=new R.o(n,i)}else if(t instanceof F){var o;(o=(n=new R.i).vertices).push.apply(o,Object(D.a)(t));i=new R.k({color:16748543});s=new R.j(n,i)}else if(t instanceof V);else if(t instanceof P){n=new R.i;for(var c=t.radius,l=0;l<=128;l++){var u=new h;u.x=c*Math.cos(Math.PI/64*l),u.y=c*Math.sin(Math.PI/64*l),n.vertices.push(u)}var y=Q(new h(0,0,1),t.normal);(d=new R.n).makeRotationFromQuaternion(y),n.applyMatrix(d),n.translate(t.center.x,t.center.y,t.center.z);i=new R.k({color:9437183});(s=new R.j(n,i)).add(new I(t.center)),s.add(new I(new A(t.center,t.normal)))}else if(t instanceof O){var d;n=new R.d(t.radius,128),i=new R.p({color:9408511,side:R.e}),y=Q(new h(0,0,1),t.normal);(d=new R.n).makeRotationFromQuaternion(y),n.applyMatrix(d),n.translate(t.center.x,t.center.y,t.center.z),(s=new R.o(n,i)).add(new I(t.center)),s.add(new I(new A(t.center,t.normal)))}return s}function $(t,e){var s="",i=0,n=function(t,e){var s=null;if("[object String]"!==Object.prototype.toString.call(t))try{s=JSON.stringify(t)}catch(t){console.error("您传递的json数据格式有误，请核对..."),console.error(t),e(t)}else try{t=t.replace(/(\')/g,'"'),s=JSON.stringify(JSON.parse(t))}catch(t){console.error("您传递的json数据格式有误，请核对..."),console.error(t),e(t)}return s}(t,e);if(!n)return n;var r=[],a=null,o=null,c=[];return n=(n=(n=(n=(n=n.replace(/([\{\}])/g,"\r\n$1\r\n")).replace(/([\[\]])/g,"\r\n$1\r\n")).replace(/(\,)/g,"$1\r\n")).replace(/(\r\n\r\n)/g,"\r\n")).replace(/\r\n\,/g,","),(c=n.split("\r\n")).forEach((function(t,e){var s=t.match(/\"/g)?t.match(/\"/g).length:0;s%2&&!a&&(a=e),s%2&&a&&a!=e&&(o=e),a&&o&&(r.push({start:a,end:o}),a=null,o=null)})),r.reverse().forEach((function(t,e){var s=c.slice(t.start,t.end+1);c.splice(t.start,t.end+1-t.start,s.join(""))})),n=(n=(n=c.join("\r\n")).replace(/\:\r\n\{/g,":{")).replace(/\:\r\n\[/g,":["),(c=n.split("\r\n")).forEach((function(t,e){console.log(t);var n=0,r=0,a="";for(t.match(/\{$/)||t.match(/\[$/)?r+=1:t.match(/\}$/)||t.match(/\]$/)||t.match(/\},$/)||t.match(/\],$/)?0!==i&&(i-=1):r=0,n=0;n<i;n++)a+="    ";s+=a+t+"\r\n",i+=r})),s.trim()}var U=s(294),N={name:"distance",props:{geo0:String,geo1:String},data:function(){return{loadingTag:"avs",resultText:""}},methods:{init:function(){var t=this.$refs.p2other;this.camera=new R.s(55,t.clientWidth/t.clientHeight,.01,1e3),this.camera.position.set(0,200,-120),this.scene=new R.x;var e=new R.b(.2,.2,.2),s=new R.q;this.mesh=new R.o(e,s),this.scene.add(this.mesh),this.renderer=new R.C({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(t.clientWidth,t.clientHeight),this.control=new U.a(this.camera,this.renderer.domElement),t.appendChild(this.renderer.domElement),this.scene.add(new R.v(100,8,10,64,696304,716959)),this.scene.add(new R.a(1e3)),this.testScene=new R.r,this.scene.add(this.testScene);var i=this;window.addEventListener("resize",(function(){i.$refs.p2other}));var n=X(this.geo0,this.geo1,this.testScene);this.resultText=$(JSON.stringify(n))},refresh:function(){this.testScene.children=[];var t=X(this.geo0,this.geo1,this.testScene);this.resultText=$(JSON.stringify(t))},animate:function(){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)}},mounted:function(){this.init(),this.animate()}},J=(s(295),s(16)),B=Object(J.a)(N,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("更新测试案例")]),t._v(" "),s("div",{ref:"p2other",staticClass:"container"}),t._v(" "),s("el-divider",{attrs:{"content-position":"left"}},[t._v("运行结果")]),t._v(" "),s("div",{ref:"infoPanel",staticClass:"info_panel"},[s("pre",[s("code",{staticClass:"json"},[t._v(" "+t._s(t.resultText))])])])],1)}),[],!1,null,null,null);e.default=B.exports}}]);